// test_add16.c
#include "../unity/src/unity.h"
#include "../include/adders/add16.h"

#include <stdlib.h>

void setUp(void) {
    // Set up code if needed
}

void tearDown(void) {
    // Tear down code if needed
}

/*
    Add16 Truth Table
    |        a         |        b         |       out        |
    | 0000000000000000 | 0000000000000000 | 0000000000000000 |
    | 0000000000000000 | 1111111111111111 | 1111111111111111 |
    | 1111111111111111 | 1111111111111111 | 1111111111111110 |
    | 1010101010101010 | 0101010101010101 | 1111111111111111 |
    | 0011110011000011 | 0000111111110000 | 0100110010110011 |
    | 0001001000110100 | 1001100001110110 | 1010101010101010 |
 */

void test_add16_should_return_0000000000000000_for_0000000000000000_0000000000000000(void) {
    bit a[16] = {0}, b[16] = {0}, c[16] = {0};
    add16(a, b, c);
    TEST_ASSERT_EQUAL_UINT8(0, c[0]);
    TEST_ASSERT_EQUAL_UINT8(0, c[1]);
    TEST_ASSERT_EQUAL_UINT8(0, c[2]);
    TEST_ASSERT_EQUAL_UINT8(0, c[3]);
    TEST_ASSERT_EQUAL_UINT8(0, c[4]);
    TEST_ASSERT_EQUAL_UINT8(0, c[5]);
    TEST_ASSERT_EQUAL_UINT8(0, c[6]);
    TEST_ASSERT_EQUAL_UINT8(0, c[7]);
    TEST_ASSERT_EQUAL_UINT8(0, c[8]);
    TEST_ASSERT_EQUAL_UINT8(0, c[9]);
    TEST_ASSERT_EQUAL_UINT8(0, c[10]);
    TEST_ASSERT_EQUAL_UINT8(0, c[11]);
    TEST_ASSERT_EQUAL_UINT8(0, c[12]);
    TEST_ASSERT_EQUAL_UINT8(0, c[13]);
    TEST_ASSERT_EQUAL_UINT8(0, c[14]);
    TEST_ASSERT_EQUAL_UINT8(0, c[15]);
}

void test_add16_should_return_1111111111111111_for_0000000000000000_1111111111111111(void) {
    bit a[16] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}, b[16] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}, c[16] = {0};
    add16(a, b, c);
    TEST_ASSERT_EQUAL_UINT8(1, c[0]);
    TEST_ASSERT_EQUAL_UINT8(1, c[1]);
    TEST_ASSERT_EQUAL_UINT8(1, c[2]);
    TEST_ASSERT_EQUAL_UINT8(1, c[3]);
    TEST_ASSERT_EQUAL_UINT8(1, c[4]);
    TEST_ASSERT_EQUAL_UINT8(1, c[5]);
    TEST_ASSERT_EQUAL_UINT8(1, c[6]);
    TEST_ASSERT_EQUAL_UINT8(1, c[7]);
    TEST_ASSERT_EQUAL_UINT8(1, c[8]);
    TEST_ASSERT_EQUAL_UINT8(1, c[9]);
    TEST_ASSERT_EQUAL_UINT8(1, c[10]);
    TEST_ASSERT_EQUAL_UINT8(1, c[11]);
    TEST_ASSERT_EQUAL_UINT8(1, c[12]);
    TEST_ASSERT_EQUAL_UINT8(1, c[13]);
    TEST_ASSERT_EQUAL_UINT8(1, c[14]);
    TEST_ASSERT_EQUAL_UINT8(1, c[15]);
}

void test_add16_should_return_1111111111111110_for_1111111111111111_1111111111111111(void) {
    bit a[16] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
    bit b[16] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};
    bit c[16] = {0};
    add16(a, b, c);
    TEST_ASSERT_EQUAL_UINT8(0, c[0]);
    TEST_ASSERT_EQUAL_UINT8(1, c[1]);
    TEST_ASSERT_EQUAL_UINT8(1, c[2]);
    TEST_ASSERT_EQUAL_UINT8(1, c[3]);
    TEST_ASSERT_EQUAL_UINT8(1, c[4]);
    TEST_ASSERT_EQUAL_UINT8(1, c[5]);
    TEST_ASSERT_EQUAL_UINT8(1, c[6]);
    TEST_ASSERT_EQUAL_UINT8(1, c[7]);
    TEST_ASSERT_EQUAL_UINT8(1, c[8]);
    TEST_ASSERT_EQUAL_UINT8(1, c[9]);
    TEST_ASSERT_EQUAL_UINT8(1, c[10]);
    TEST_ASSERT_EQUAL_UINT8(1, c[11]);
    TEST_ASSERT_EQUAL_UINT8(1, c[12]);
    TEST_ASSERT_EQUAL_UINT8(1, c[13]);
    TEST_ASSERT_EQUAL_UINT8(1, c[14]);
    TEST_ASSERT_EQUAL_UINT8(1, c[15]);
}

void test_add16_should_return_1111111111111111_for_1010101010101010_0101010101010101(void) {
    bit a[16] = {1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0};
    bit b[16] = {0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1};
    bit c[16] = {0};
    add16(a, b, c);
    TEST_ASSERT_EQUAL_UINT8(1, c[0]);
    TEST_ASSERT_EQUAL_UINT8(1, c[1]);
    TEST_ASSERT_EQUAL_UINT8(1, c[2]);
    TEST_ASSERT_EQUAL_UINT8(1, c[3]);
    TEST_ASSERT_EQUAL_UINT8(1, c[4]);
    TEST_ASSERT_EQUAL_UINT8(1, c[5]);
    TEST_ASSERT_EQUAL_UINT8(1, c[6]);
    TEST_ASSERT_EQUAL_UINT8(1, c[7]);
    TEST_ASSERT_EQUAL_UINT8(1, c[8]);
    TEST_ASSERT_EQUAL_UINT8(1, c[9]);
    TEST_ASSERT_EQUAL_UINT8(1, c[10]);
    TEST_ASSERT_EQUAL_UINT8(1, c[11]);
    TEST_ASSERT_EQUAL_UINT8(1, c[12]);
    TEST_ASSERT_EQUAL_UINT8(1, c[13]);
    TEST_ASSERT_EQUAL_UINT8(1, c[14]);
    TEST_ASSERT_EQUAL_UINT8(1, c[15]);
}

void test_add16_should_return_0100110010110011_for_0011110011000011_0000111111110000(void) {
    bit a[16] = {1,1,0,0,0,0,1,1,0,0,1,1,1,1,0,0};
    bit b[16] = {0,0,0,0,1,1,1,1,1,1,1,1,0,0,0,0};
    bit c[16] = {0};
    add16(a, b, c); // big endian
    TEST_ASSERT_EQUAL_UINT8(1, c[0]);
    TEST_ASSERT_EQUAL_UINT8(1, c[1]);
    TEST_ASSERT_EQUAL_UINT8(0, c[2]);
    TEST_ASSERT_EQUAL_UINT8(0, c[3]);
    TEST_ASSERT_EQUAL_UINT8(1, c[4]);
    TEST_ASSERT_EQUAL_UINT8(1, c[5]);
    TEST_ASSERT_EQUAL_UINT8(0, c[6]);
    TEST_ASSERT_EQUAL_UINT8(1, c[7]);
    TEST_ASSERT_EQUAL_UINT8(0, c[8]);
    TEST_ASSERT_EQUAL_UINT8(0, c[9]);
    TEST_ASSERT_EQUAL_UINT8(1, c[10]);
    TEST_ASSERT_EQUAL_UINT8(1, c[11]);
    TEST_ASSERT_EQUAL_UINT8(0, c[12]);
    TEST_ASSERT_EQUAL_UINT8(0, c[13]);
    TEST_ASSERT_EQUAL_UINT8(1, c[14]);
    TEST_ASSERT_EQUAL_UINT8(0, c[15]);
}

void test_add16_should_return_1010101010101010_for_0001001000110100_1001100001110110(void) {
    bit a[16] = {0,0,1,0,1,1,0,0,0,1,0,0,1,0,0,0};
    bit b[16] = {0,1,1,0,1,1,1,0,0,0,0,1,1,0,0,1};
    bit c[16] = {0};
    add16(a, b, c);
    TEST_ASSERT_EQUAL_UINT8(0, c[0]);
    TEST_ASSERT_EQUAL_UINT8(1, c[1]);
    TEST_ASSERT_EQUAL_UINT8(0, c[2]);
    TEST_ASSERT_EQUAL_UINT8(1, c[3]);
    TEST_ASSERT_EQUAL_UINT8(0, c[4]);
    TEST_ASSERT_EQUAL_UINT8(1, c[5]);
    TEST_ASSERT_EQUAL_UINT8(0, c[6]);
    TEST_ASSERT_EQUAL_UINT8(1, c[7]);
    TEST_ASSERT_EQUAL_UINT8(0, c[8]);
    TEST_ASSERT_EQUAL_UINT8(1, c[9]);
    TEST_ASSERT_EQUAL_UINT8(0, c[10]);
    TEST_ASSERT_EQUAL_UINT8(1, c[11]);
    TEST_ASSERT_EQUAL_UINT8(0, c[12]);
    TEST_ASSERT_EQUAL_UINT8(1, c[13]);
    TEST_ASSERT_EQUAL_UINT8(0, c[14]);
    TEST_ASSERT_EQUAL_UINT8(1, c[15]);
}

int main(void) {
    UNITY_BEGIN();
    RUN_TEST(test_add16_should_return_0000000000000000_for_0000000000000000_0000000000000000);
    RUN_TEST(test_add16_should_return_1111111111111111_for_0000000000000000_1111111111111111);
    RUN_TEST(test_add16_should_return_1111111111111110_for_1111111111111111_1111111111111111);
    RUN_TEST(test_add16_should_return_1111111111111111_for_1010101010101010_0101010101010101);
    RUN_TEST(test_add16_should_return_0100110010110011_for_0011110011000011_0000111111110000);
    RUN_TEST(test_add16_should_return_1010101010101010_for_0001001000110100_1001100001110110);
    return UNITY_END();
}
// test_add16.c
